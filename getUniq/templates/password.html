{% extends "base.html" %}

{% block content %}

<main id="main" class="container">

  <p id="title" class="text-center lead">Set Password</p>

  <div class="row">
    <div id="grid" class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12">

    <div class="panel panel-default">
      <div class="panel-body">

    Choose a different password from those you use at non U-M websites. Choosing a unique password for U-M use increases your security.<br><br>

      <form id="id-passwordForm" action="" class="blueForms" method="post">
        {% csrf_token %}

        {% if form.errors %}
          {% for error in form.non_field_errors %}
            <div class="alert alert-danger">
              {{ error|escape }}
            </div>
          {% endfor %}
        {% endif %}

        <div class="row">

          <div id="div_id_password" class="col-sm-6 form-group">
            <div class="form-group">
              <label class="formLabel">Password:</label>
              <input type="password" name="password" class="textinput textInput form-control" required id="id_password">
              <span><div id="id_password_help" class="text-danger" style="visibility:hidden"></div></span>
              {% if form.password.errors %}
                <div class="help-block">
                  {% for error in form.password.errors %}
                    {{ error|escape }}
                  {% endfor %}
                </div>
              {% endif %}
            </div>
            <div id="div_id_confirm_password" class="form-group">
              <label class="formLabel">Confirm Password:</label>
              <input type="password" name="confirm_password" class="textinput textInput form-control" required id="id_confirm_password">
              <span><div id="id_confirm_help" class="text-danger" style="visibility:hidden">Passwords must match</div></span>
              {% if form.confirm_password.errors %}
                <div class="help-block">
                  {% for error in form.confirm_password.errors %}
                    {{ error|escape }}
                  {% endfor %}
                </div>
              {% endif %}
            </div>
          </div>

          <div class="col-sm-6 form-group">
            <h4>Your new password must:</h4>
            <ul style="list-style-type:none; padding-left:0;">
              <li><span id="min_char" class="glyphicon glyphicon-chevron-right"></span> use 9 or more characters</li>
              <li><span id="meet3" class="glyphicon glyphicon-chevron-right"></span> have at least 3 of:
                <ul style="list-style-type:none">
                  <li><span id="lcase" class="glyphicon glyphicon-chevron-right"></span> lowercase letters</li>
                  <li><span id="ucase" class="glyphicon glyphicon-chevron-right"></span> uppercase letters</li>
                  <li><span id="digit" class="glyphicon glyphicon-chevron-right"></span> numerals</li>
                  <li><span id="punc" class="glyphicon glyphicon-chevron-right"></span> punctuation</li>
                </ul>
              </li>
            </ul>
          </div>

        </div>

        <div class="form-actions">
          <button id="id_submit_btn" class="btn btn-lg btn-blue btn-block" type="submit" disabled>Set Password</button>
        </div>
        <span id="uid" hidden>{{ uid|default_if_none:"" }}</span>
      </form>

    </div></div> <!--panel-->

    </div>
  </div>
</main>

{% endblock %}

{% block javascript %}
{% load staticfiles %}
<script src="{% static 'js/password.js' %}"></script>
{% endblock javascript %}
